"jdbc:mysql://localhost:3306/movies";
"root";





-- Users Table
CREATE TABLE Users (
    UserID INT AUTO_INCREMENT PRIMARY KEY,
    Username VARCHAR(50) UNIQUE NOT NULL,
    Password VARCHAR(255) NOT NULL, -- Hashed password
    Salt VARCHAR(255) NOT NULL
);

-- Movies Table
CREATE TABLE Movies (
    MovieID INT AUTO_INCREMENT PRIMARY KEY,
    Title VARCHAR(100) NOT NULL,
    Director VARCHAR(100),
    ReleaseDate DATE
    -- Other movie details
);

-- UserMovies Table
CREATE TABLE UserMovies (
    UserMovieID INT AUTO_INCREMENT PRIMARY KEY,
    UserID INT,
    MovieID INT,
    UserRating DECIMAL(3, 1), -- Assuming ratings from 0.0 to 10.0
    FOREIGN KEY (UserID) REFERENCES Users(UserID),
    FOREIGN KEY (MovieID) REFERENCES Movies(MovieID)
);


CREATE TABLE UserFriends (
    FriendshipID INT AUTO_INCREMENT PRIMARY KEY,
    UserID INT,
    FriendID INT,
    FOREIGN KEY (UserID) REFERENCES Users(UserID),
    FOREIGN KEY (FriendID) REFERENCES Users(UserID)
);


CREATE TABLE PendingRequests (
    RequestID INT AUTO_INCREMENT PRIMARY KEY,
    SenderID INT,
    ReceiverID INT,
    RequestDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (SenderID) REFERENCES Users(UserID),
    FOREIGN KEY (ReceiverID) REFERENCES Users(UserID)
);



CREATE TABLE AcceptedFriends (
    FriendshipID INT AUTO_INCREMENT PRIMARY KEY,
    UserID1 INT,
    UserID2 INT,
    FriendshipDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (UserID1) REFERENCES Users(UserID),
    FOREIGN KEY (UserID2) REFERENCES Users(UserID)
);









ALTER TABLE UserMovies
ADD COLUMN Title VARCHAR(100) NOT NULL AFTER MovieID;

ALTER TABLE UserMovies
ADD COLUMN FriendshipID INT,
ADD FOREIGN KEY (FriendshipID) REFERENCES UserFriends(FriendshipID);
ALTER TABLE UserMovies ADD CONSTRAINT unique_movie_per_user UNIQUE (UserID, Title);
